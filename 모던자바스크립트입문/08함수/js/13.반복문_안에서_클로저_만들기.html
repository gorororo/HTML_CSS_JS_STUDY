<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>반복문 안에서 클로저 만들기</title>
    </head>
    <body>
        <input type="button" value="0" />
        <input type="button" value="1" />
        <input type="button" value="2" />
        <script defer>
            document.addEventListener("DOMContentLoaded", () => {
                let elem = document.getElementsByTagName("input");
                // let i;
                // for (i = 0; i < elem.length; i++){
                //         elem[i].onclick = () => {
                //             console.log(i);
                //         };
                //     }
                //     }
                // 위 예제대로 하면 계속 i는 3이된다 새로운 선언이없이 위에 
                // var 호이스팅도 마찬가지
                // 변수가 선언되있기때문에 반복문이
                // 다돌고 난 i 를 출력한다 
                // 수정 1번
                // for(i =0; i<elem.length; i++)(function(_i){
                //     elem[_i].onclick = ()=>{
                //         console.log(_i);
                //     };
                // })(i);
                // 수정 2번
                // for (let i = 0; i<elem.length; i++){
                //     elem[i].onclick = ()=>{
                //         console.log(i);
                //     };
                // }
                // 수정 3번
                for(var _i = 0; _i<elem.length; _i++){
                    let i = _i;
                    elem[i].onclick = ()=>{
                        console.log(i);
                    };
                }
            });
        </script>
    </body>
</html>
